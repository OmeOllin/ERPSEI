@page "{handler?}"
@using ERPSEI.Data.Managers;
@using Microsoft.AspNetCore.Localization;
@using Microsoft.AspNetCore.Mvc.Localization;
@using ERPSEI.Areas.Catalogos.Pages;
@using ERPSEI.Data.Entities.Empleados;
@using ERPSEI.Data.Managers.Empleados;
@model RolesModel
@inject IViewLocalizer Localizer;
@inject RoleManager RolesManager;
@{
	ViewData["Title"] = Localizer["Title"];

	// Retrieves the requested culture
	IRequestCultureFeature? rqf = Request.HttpContext.Features.Get<IRequestCultureFeature>();

	// Culture contains the information of the requested culture
	System.Globalization.CultureInfo? culture = rqf != null ? rqf.RequestCulture.Culture : new System.Globalization.CultureInfo("es-MX");

	string cultureName = culture.Name;

	List<IdentityRole> roles = await RolesManager.GetAllAsync();

	List<string> modulos = new List<string>()
	{
		"Gestión de Talento",
		"Usuarios",
		"Puestos",
		"Áreas",
		"Subareas",
		"Oficinas",
		"Empresas",
		"Orígenes",
		"Niveles",
		"Perfiles",
		"Vacaciones",
		"Incapacidades",
		"Permisos",
		"Prefacturas",
		"Organigrama",
		"Asistencia"
	};
}
<h3 class="title mb-3">@ViewData["Title"]</h3>

<!-- --------------------------- -->
<!-- Sección tabla de resultados -->
<table id="table" class="table-sm"
		data-unique-id="id"
		data-search="true"
		data-show-toggle="true"
		data-show-fullscreen="true"
		data-show-columns="true"
		data-show-columns-toggle-all="true"
		data-detail-view="false"
		data-show-export="false"
		data-click-to-select="true"
		data-minimum-count-columns="2"
		data-show-pagination-switch="true"
		data-pagination="true"
		data-id-field="id"
		data-page-list="[10, 25, 50, 100, all]"
		data-show-footer="false"
		data-side-pagination="client"
		data-response-handler="responseHandler"
		data-buttons-class="primary">
	<thead>
		<tr align="center" valign="middle" class="bg-primary bg-opacity-10">
		</tr>
	</thead>
</table>
<!-- --------------------------- -->
<!-- --------------------------- -->

<!-- --------------------------- -->
<!-- Sección Editar/Ver Registro --- -->
<div id="dlgDetalle" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 id="dlgDetalleTitle" class="modal-title"></h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
			</div>
			<div class="modal-body align-items-center">
				<form id="theForm" method="post">
					<div class="container-fluid">
						<div id="saveValidationSummary" class="text-danger mb-3" role="alert"></div>
						<div class="row">
							<div class="col-12">
								<div class="form-floating mb-3">
									<input hidden id="inpRolId" type="text" class="form-control" />
								</div>
							</div>
							<div class="col-12">
								<div class="form-floating mb-3">
									<input disabled id="inpRolNombre" asp-for="InputRol.NombreRol" type="text" class="form-control" placeholder="@Localizer["NombreRolPlaceholder"]" />
									<label for="inpRolNombre" asp-for="InputRol.NombreRol" class="form-label"></label>
								</div>
							</div>
							<div class="col-12">
								<ul class="list-group">
									<li class="list-group-item bg-light">
										<div class="row">
											<div class="col-5 border-end text-center align-content-center">
												<h6 class="m-0">ModulosTitle</h6>
											</div>
											<div class="col-1 text-center align-content-center">
												<i class="bi bi-asterisk d-block p-0 btn"></i>
												<input class="form-check-input" type="checkbox" value="" id="inpPuedeTodo">
											</div>
											<div class="col-1 text-center align-content-center">
												<i class="bi bi-search d-block p-0 btn"></i>
												<input class="form-check-input" type="checkbox" value="" id="inpPuedeTodo">
											</div>
											<div class="col-1 text-center align-content-center">
												<i class="bi bi-pencil d-block p-0 btn"></i>
												<input class="form-check-input" type="checkbox" value="" id="inpPuedeTodo">
											</div>
											<div class="col-1 text-center align-content-center">
												<i class="bi bi-x-lg d-block p-0 btn"></i>
												<input class="form-check-input" type="checkbox" value="" id="inpPuedeTodo">
											</div>
											<div class="col-1 text-center align-content-center">
												<i class="bi bi-check-circle d-block p-0 btn"></i>
												<input class="form-check-input" type="checkbox" value="" id="inpPuedeTodo">
											</div>
										</div>
									</li>
									@foreach(string modulo in modulos)
									{
										<li class="list-group-item">
											<div class="row">
												<div class="col-5 border-end text-center align-content-center">
													<h6 class="m-0">@modulo</h6>
												</div>
												<div class="col-1 text-center align-content-center">
													<input class="form-check-input" type="checkbox" value="" id="inpPuedeTodo">
												</div>
												<div class="col-1 text-center align-content-center">
													<input class="form-check-input" type="checkbox" value="" id="inpPuedeConsultar">
												</div>
												<div class="col-1 text-center align-content-center">
													<input class="form-check-input" type="checkbox" value="" id="inpPuedeEditar">
												</div>
												<div class="col-1 text-center align-content-center">
													<input class="form-check-input" type="checkbox" value="" id="inpPuedeEliminar">
												</div>
												@if(modulo == "Prefacturas")
												{
													<div class="col-1 text-center align-content-center">
														<input class="form-check-input" type="checkbox" value="" id="inpPuedeAutorizar">
													</div>
												}
											</div>
										</li>
									}
								</ul>
							</div>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer" style="display: inline !important;">
				<div class="row">
					<div class="col-12 text-end">
						<button id="dlgDetallesBtnCancelar" type="button" class="btn btn-secondary" onclick="onCerrarClick();" data-bs-dismiss="modal">
							<i class="bi bi-x-lg"></i> @Localizer["CancelButtonTitle"]
						</button>
						<button id="dlgDetallesBtnGuardar" type="button" class="btn btn-primary formButton" onclick="onGuardarClick();">
							<i class="bi bi-floppy"></i> @Localizer["SaveButtonTitle"]
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- --------------------------- -->
<!-- --------------------------- -->

@section Scripts {
	<link rel="stylesheet" href="~/lib/bootstrap-table/bootstrap-table.min.css">

	<script src="~/lib/bootstrap-table/bootstrap-table.min.js"></script>
	<script src="~/lib/bootstrap-table/locale/bootstrap-table-es-MX.min.js"></script>
	<script src="~/lib/bootstrap-table/locale/bootstrap-table-en-US.min.js"></script>

	@* <link rel="stylesheet" href="~/css/Roles.css" /> *@
	<script src="~/../Areas/Catalogos/Pages/Roles.cshtml.js"></script>

	<script type="text/javascript">
		var cultureName = "@cultureName";
		var btnBuscarTitle = '@Localizer["SearchButton"]';
		var btnVerTitle = '@Localizer["SeeButtonTitle"]';
		var btnEditarTitle = '@Localizer["EditButtonTitle"]';
		var dlgEditarTitle = '@Localizer["EditDialogTitle"]';
		var dlgVerTitle = '@Localizer["SeeDialogTitle"]';
		var colNombreRolHeader = '@Localizer["ColNameRolHeader"]';
		var colAccionesHeader = '@Localizer["ColActionsHeader"]';
		var emptySelectItemText = '@Localizer["Seleccione"]';
	</script>

	<partial name="_ValidationScriptsPartial" />
}